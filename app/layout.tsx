import type { Metadata } from 'next'
import dynamic from 'next/dynamic'

import { Montserrat } from 'next/font/google'

import Header from './_components/header'
import Footer from './_components/footer'
import NavBarPublic from './_components/navBarPublic'
import ToogleMenu from './_components/toogleMenu'

import NavBarSkeleton from './_skeletons/navBarSkeleton'
import PageSkeleton from './_skeletons/pageSkeleton'

import { checkCookieExist } from './_actions/authActions'
import '@/styles/globals.scss'
// import Alert from './_components/alert'

const montserrat = Montserrat({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: {
    template: 'Sciflutter | %s',
    default: 'Sciflutter'
  },
  description: 'Generated by create next app',
}

const DynamicNavBar = dynamic(() => import('./_components/navBar'), { loading: () => <NavBarSkeleton />, ssr: false })
const DynamicApp = dynamic(() => import('./_components/layoutApp'), { loading: () => <PageSkeleton /> })
const DynamicAlert = dynamic(() => import('./_components/alert'), { ssr: false })

interface Props {
  children: React.ReactNode
}

const RootLayout: React.FC<Props> = ({ children }) => {
  return (
    <html lang="en">
      <body className={montserrat.className}>
        <Header>
          {!checkCookieExist() ? <NavBarPublic /> : <DynamicNavBar />}
        </Header>

        <DynamicApp>{children}</DynamicApp>

        <Footer />

        <ToogleMenu />

        <DynamicAlert />
      </body>
    </html>
  );
}

export default RootLayout